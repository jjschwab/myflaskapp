<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Processing Portal</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        form { margin-bottom: 20px; }
        label, input, button { margin: 10px 0; }
        img { margin-top: 10px; width: 100%; max-width: 300px; }
    </style>
</head>
<body>
    <h1>Video Processing Portal</h1>

    <!-- Form to submit video URL -->
    <form id="videoForm">
        <label for="videoUrl">Enter YouTube video URL:</label>
        <input type="text" id="videoUrl" required placeholder="https://">
        <button type="submit">Process Video</button>
    </form>

    <!-- Section to display results -->
    <div id="results"></div>

    <script>
        document.getElementById('videoForm').onsubmit = async function(e) {
            e.preventDefault();
            const videoUrl = document.getElementById('videoUrl').value;
            document.getElementById('results').innerHTML = 'Processing... Please wait.';

            const response = await fetch('/process_video', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ video_url: videoUrl })
            });

            if (response.ok) {
                const data = await response.json();
                let htmlContent = 'Scenes Found:<br>';
                data.forEach(scene => {
                    htmlContent += `
                        <div>
                            <p>Scene: ${scene.scene_id}</p>
                            <p>Category: ${scene.category}</p>
                            <p>Confidence: ${scene.confidence.toFixed(2)}</p>
                            <p>Start Time: ${scene.start_time}</p>
                            <p>End Time: ${scene.end_time}</p>
                            <p>Duration: ${scene.duration.toFixed(2)} seconds</p>
                            <p>Description: ${scene.best_description}</p>
                            <img src="data:image/jpeg;base64,${scene.image}" alt="Scene Image">
                        </div>`;
                });
                document.getElementById('results').innerHTML = htmlContent;
            } else {
                document.getElementById('results').innerHTML = 'Failed to process video.';
            }
        };
    </script>
</body>
</html>